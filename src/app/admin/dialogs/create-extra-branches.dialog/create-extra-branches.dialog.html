<div style="width: min(700px, 90vw);">
  <h2 mat-dialog-title style="display: flex; align-items: center; gap: 12px;">
    <mat-icon>tune</mat-icon>
    <span>Añadir extras a la sede</span>
  </h2>
  <mat-dialog-content style="display: flex; flex-direction: column; gap: 16px;">
    @if (dataLoaded) {
      <div style="margin-top: 10px;">
        <button matButton="filled" [disabled]="savingExtraBranches" (click)="onSaveExtraBranches()">
          <mat-icon>save</mat-icon>
          <span>Agregar seleccionados</span>
        </button>
      </div>
      <div style="overflow: auto;">
        <table mat-table [dataSource]="extraBranches">
          <ng-container matColumnDef="add">
            <th mat-header-cell *matHeaderCellDef style="font-weight: 600; background: #f5f5f5;">Añadir</th>
            <td mat-cell *matCellDef="let e">
              <mat-checkbox (change)="onToggleExtraBranch(e)"></mat-checkbox>
            </td>
          </ng-container>
          <ng-container matColumnDef="extra">
            <th mat-header-cell *matHeaderCellDef style="font-weight: 600; background: #f5f5f5;">Extra</th>
            <td mat-cell *matCellDef="let e">
              <div style="font-weight: 600;">{{ e.extra.name }}</div>
            </td>
          </ng-container>
          <ng-container matColumnDef="actions">
            <th mat-header-cell *matHeaderCellDef style="font-weight: 600; background: #f5f5f5;">Acciones</th>
            <td mat-cell *matCellDef="let e" class="bd-actions-cell">
              <button matButton="tonal" [disabled]="!e.changed" (click)="onSaveExtraBranch(e)">
                <mat-icon>save</mat-icon>
                <span>Añadir a sede</span>
              </button>
            </td>
          </ng-container>
          <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
        </table>
      </div>
    } @else {
      <div style="display: flex; justify-content: center; margin: 10px 0">
        <mat-progress-spinner mode="indeterminate"></mat-progress-spinner>
      </div>
    }
  </mat-dialog-content>
  <mat-dialog-actions>
    <button mat-button [mat-dialog-close]="dataSaved" [disabled]="savingExtraBranches">Cerrar</button>
  </mat-dialog-actions>
</div>
